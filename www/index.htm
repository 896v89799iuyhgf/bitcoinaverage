<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>BitcoinAverage</title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        var base_host = '';
        var API_host = '';
        var API_all_url = '';
        $(function(){
            var current_host = window.location.host;
            if (current_host == '') {
                current_host = 'dev.bitcoinaverage.com';
            }
            current_host = current_host.split('.');

            base_host = current_host.pop();
            base_host = current_host.pop()+'.'+base_host;
            API_host = 'api.'+base_host;
            API_all_url = 'http://'+API_host+'/all';

            updateRates();
            setInterval(updateRates, 5000);

            $('#BTC-USD-last, #BTC-CAD-last, #BTC-EUR-last, #BTC-GBP-last, #BTC-RUR-last, #BTC-USD-ask, #BTC-CAD-ask, #BTC-EUR-ask, #BTC-GBP-ask, #BTC-RUR-ask, #BTC-USD-bid, #BTC-CAD-bid, #BTC-EUR-bid, #BTC-GBP-bid, #BTC-RUR-bid').dblclick(function(event){
                event.preventDefault();
                $(this).selectText();
            });
        });


        function updateRates(){
            $.getJSON(API_all_url, function(result) {
                $('body').show();

                document.title = result.USD.rates.last+' - BitcoinAverage';

                $('#BTC-USD-last').text(result.USD.rates.last);
                $('#BTC-CAD-last').text(result.CAD.rates.last);
                $('#BTC-EUR-last').text(result.EUR.rates.last);
                $('#BTC-GBP-last').text(result.GBP.rates.last);
                $('#BTC-RUR-last').text(result.RUR.rates.last);

                $('#BTC-USD-ask').text(result.USD.rates.ask);
                $('#BTC-CAD-ask').text(result.CAD.rates.ask);
                $('#BTC-EUR-ask').text(result.EUR.rates.ask);
                $('#BTC-GBP-ask').text(result.GBP.rates.ask);
                $('#BTC-RUR-ask').text(result.RUR.rates.ask);

                $('#BTC-USD-bid').text(result.USD.rates.bid);
                $('#BTC-CAD-bid').text(result.CAD.rates.bid);
                $('#BTC-EUR-bid').text(result.EUR.rates.bid);
                $('#BTC-GBP-bid').text(result.GBP.rates.bid);
                $('#BTC-RUR-bid').text(result.RUR.rates.bid);

            });
        }


        jQuery.fn.selectText = function(){
            var doc = document
                , element = this[0]
                , range, selection
            ;
            if (doc.body.createTextRange) {
                range = document.body.createTextRange();
                range.moveToElementText(element);
                range.select();
            } else if (window.getSelection) {
                selection = window.getSelection();
                range = document.createRange();
                range.selectNodeContents(element);
                selection.removeAllRanges();
                selection.addRange(range);
            }
        };

    </script>

    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <style type="text/css">
        body {
            background-color: #F5F5F5 ;
            position: relative;
            font-family: 'Open Sans', sans-serif;
            /*font-family: 'Helvetica', sans-serif;*/
        }

        html, body {
            height:100%;
            min-height: 100%
        }

        #header-n-content {
            width: 940px;
            min-height: 100%;
            height: auto !important;
            margin: 0 auto;
            vertical-align: middle;
        }

        #header{
            margin-top: 50px;
            font-size: 1.5em;
            color: #999;
        }
        .beta{
            color: #CCC;
            font-size: 0.8em;
            padding-left: 10px;
        }

        #content {
            position : absolute;
            top:50%;
            margin-top: -100px;
        }

        .bid_ask {
            font-size: 1.3em
        }
        .bid_ask-titles {
            color:#999;
        }

        .USD_values{
            color: #333;
            font-weight: bold;
        }
        .other_values{
            color: #999;
            font-weight: bold;
        }


        #push_footer {
            height: 45px;
        }

        #footer, #push_footer {
            margin: 0 auto;
        }

        #footer {
            height: 25px;
            margin-top: -25px;
            width: 100%;
            color: #999;
        }
    </style>
</head>
<body style="display: none;">

<div id="header-n-content" class="container">
    <div id="header" class="navbar">
        <div class="span3">BitcoinAverage <span class="beta">beta</span></div>
        <div class="span1 pull-right text-right"><a href="http://api.bitcoinaverage.com">API</a></div>
    </div>
    <div id="content">
        <div class="digits">
            <div class="row USD_values">
                <div class="span10 text-center">
                    <h1><span id="BTC-USD-last"></span> USD</h1>
                    <span class="bid_ask">
                        <span class="bid_ask-titles">bid &nbsp;</span>
                        <span id="BTC-USD-bid" title="bid"></span>
                        &nbsp;/&nbsp;
                        <span id="BTC-USD-ask" title="ask"></span>
                        <span class="bid_ask-titles">&nbsp ask</span>
                    </span>
                </div>
            </div>
            <br>
            <div class="row other_values">
                <div class="span10 text-center">
                    <div class="span1"></div>
                    <div class="span2">
                        <h4><span id="BTC-EUR-last"></span> EUR</h4>
                        <p> <span id="BTC-EUR-bid" title="bid"></span>&nbsp;/&nbsp;<span id="BTC-EUR-ask" title="ask"></span> </p>
                    </div>
                    <div class="span2">
                        <h4><span id="BTC-GBP-last"></span> GBP</h4>
                        <p> <span id="BTC-GBP-bid" title="bid"></span>&nbsp;/&nbsp;<span id="BTC-GBP-ask" title="ask"></span> </p>
                    </div>
                    <div class="span2">
                        <h4><span id="BTC-CAD-last"></span> CAD</h4>
                        <p> <span id="BTC-CAD-bid" title="bid"></span>&nbsp;/&nbsp;<span id="BTC-CAD-ask" title="ask"></span> </p>
                    </div>
                    <div class="span2">
                        <h4><span id="BTC-RUR-last"></span> RUR</h4>
                        <p> <span id="BTC-RUR-bid" title="bid"></span>&nbsp;/&nbsp;<span id="BTC-RUR-ask" title="ask"></span> </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="push_footer"></div>
</div>


<!--<div id="footer">-->
    <!--<footer class="footer">-->
        <!--<div class="text-center">-->
            <!--relative USD volumes:-->
            <!--MTGox <span id="mtgox-weight"></span>,-->
            <!--bitstamp <span id="bitstamp-weight"></span>,-->
            <!--btce <span id="bitstamp-weight"></span>,-->
            <!--bitstamp <span id="bitstamp-weight"></span>-->
        <!--</div>-->
    <!--</footer>-->
<!--</div>-->


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-42688472-1', 'bitcoinaverage.com');
ga('send', 'pageview');

</script>
</body>
</html>
